- [学习途径](#学习途径)
- [vimtutor基础学习](#vimtutor基础学习)
  - [光标的方向控制](#光标的方向控制)
  - [基本的操作](#基本的操作)
  - [常用命令](#常用命令)
  - [其他的一些操作](#其他的一些操作)
- [vim的进阶学习（途径二）](#vim的进阶学习途径二)
  - [基础操作](#基础操作)
    - [在 Vim 中打开文件](#在-vim-中打开文件)
    - [文档内查找](#文档内查找)
    - [行内查找](#行内查找)
    - [插入](#插入)
    - [删除（并保存到 Vim 剪贴板）](#删除并保存到-vim-剪贴板)
    - [复制](#复制)
    - [粘贴](#粘贴)
    - [合并](#合并)
    - [替换](#替换)
    - [撤销、重做](#撤销重做)
    - [保存文件](#保存文件)
    - [重复上一次命令](#重复上一次命令)
  - [文章排版](#文章排版)
    - [缩进](#缩进)
    - [自动排版](#自动排版)
  - [分屏](#分屏)
    - [分屏方式](#分屏方式)
    - [窗口跳转](#窗口跳转)
    - [移动分屏](#移动分屏)
    - [屏幕缩放](#屏幕缩放)
  - [标签页](#标签页)
    - [创建标签页](#创建标签页)
    - [切换标签页](#切换标签页)
    - [关闭标签页](#关闭标签页)
  - [块状操作](#块状操作)
  - [宏操作举例子](#宏操作举例子)
# 学习途径
1. 终端输入 vimtutor
2. [github项目](https://github.com/dofy/learn-vim)
3. [vim使用技巧](./Vim实用技巧（第2版）.pdf)
# vimtutor基础学习
## 光标的方向控制
 ```sh
                ^ 
                k     
     <h                    l>  
                J 
                v
```
## 基本的操作
- :q!不保存直接退出，感叹号是强制的意思 
- 按下x是删除光标位置字符 
- 按下i 在光标前插入内容，大写，在行首插入 
- 按下a在光标后插入内容，大写，在行尾插入 
- :wq保存退出 
- 按下dw删除从光标开始到下一个单词开始 
- 按下d$可以从光标处删除到行结尾 

> 命令一般包含操作符和操作对象两部份，中间可以加上数字，代表重复  

> 比如：d 删除操作符 ,w、e、$就是操作对象,de表示从光标删除到这个单词结尾
 
>按下e，可以到下一个单词最后
 
>按下w，可以到下一个单词开头

>按下b，可以到上一个单词开头
- 按下数字0跳到行首 
- 按下符号$到行末尾 
- 按下2w就是向右移两个单词，到单词开头 
- 按下3e就是向右移三个单词，到单词末尾

  
>数字是几，就往前移几个单词

>还有就是 d5w 就是删除后面五个单词,dd是删除整行，5dd是删除下面5行 

**在vim中如果输入错误，可以撤销**

- u可以撤销上一条命令，可以叠加使用 
- U撤销这一行的所有更改 
- u是可以撤销U的 
> 然后又不想撤销的话，可以用组合键`ctrl+r `来撤销用来撤销的命令 

**剪切粘贴的操作** 
- dd或者加上数字dd，到目标行的上方按下p，就可以粘贴 
- 如果有一些单词拼写错误，到错误的字母上， 
按下r，然后按下要更改成的字母,就完成了替换
- 大写的R，就会进入替换模式，按下字母就会替换当前光标所在位置的内容 
- 如果连续几个字母错了，可以将光标移动到第一个出现错误的字母，然后按下cw，就会将单词的剩余部分删掉，同时将会进入插入模式 
> 类似的，c3w代表3个单词，c$是一直到行末尾，然后进入插入模式 

**复制和粘贴** 
可以先按下v，选取需要复制的文字，然后按下y，把光标移动到想要粘贴的位置，按下p 
> yw何以复制一个单词

**文件定位**

- 按下组合键ctrl+g可以在下面看到文件的位置，光标所在行，以及进度 
- G直接到行末尾 
- gg到行开头 
- 行数G跳到该行 

**关键字查找** 

- /关键字       ，然后按下n，到下一个位置，N上一个位置 
- ？关键字，区别是逆向查找
 
> 组合键ctrl+o（字母o），回到上一次位置, 相对应的是ctrl+i，表示到相对现在，较新的位置 

**括号匹配** 

`()    {}   []` 

- 把光标放到其中一个上，按下%，就会自动跳到相匹配的另一半上，在按下%就是返回 

## 常用命令
**替换命令**

- 一行中第一个   `s/old/new` 
- 在一行中所有   `s/old/new/g` 
- 在两行之间的内容 `#,#s/old/new/g`，#代表行号 
- 在整个文件中  %s/old/new/g 
- 决定每一个是否替换 %s/old/new/gc
 
**在vim中执行shell命令** 

> `：！commad` 

**选取文字进行操作** 

在一个位置，按下v键，通过光标来选择想要操作的文字 
然后进行操作,比如： 
- w test ，把内容写进test文件 
- 按下d，来删除所选文字 

**提取外部内容，写入文件**

- 先把光标移动到想要读入的位置，然后 
输入命令   `：r  test` 
> 还可以把外部命令的输出写进文件 
>如  `：r !cat test`

**快速新建一个空白行** 

- 按下 字母o 可以在光标下一行打开一行 
- 按下大写字母O是在光标上打开一行 
 
**设置选项** 
- 搜索时忽略大小写
 
在搜索时，输入命令  `：set ic` 

还有 is 是部分匹配，hls是结果高亮 
在前面加上no，表示禁用比如 :`noic、nohls、nois` 

`\c:/ignore\c`可以仅在一次搜索ignore是忽略大小写 

## 其他的一些操作
键盘上的 F1，或者输入  ：help 

>ctrl+w可以在帮助窗口之间切换 

**vim的配置文件** 

～/.vimrc 
~/.vim/vimrc 

**命令补全** 

>输入  ：e 
>然后可以按ctrl+d来显示所有e开头的命令 
>一可以按tab，然后选择一个
# vim的进阶学习（途径二）
## 基础操作
- `w` or `W` 向右移动到下一单词开头 
- `e` or `E` 向右移动到单词结尾 
- `b` or `B` 向左移动到单词开头 
- `gg` 到文档第一行 
- `G` 到文档最后一行 
- `0` 到行首（第 1 列） 
- `^` 到第一个非空白字符 
- `$` 到行尾 
- `H` 移动到屏幕顶端  
- `M` 移动到屏幕中间 
- `L` 移动到屏幕底部 
- `Ctrl-d` 向下移动半页 
- `Ctrl-u` 向上移动半页 
- `Ctrl-f` 向下移动一页 
- `Ctrl-b` 向上移动一页 
- `:<N>` or `<N>gg` 跳转到第 N 行 
- `:+<N>` or `<N>j` 向下跳 N 行 
- `:-<N>` or `<N>k` 向上跳 N 行 
### 在 Vim 中打开文件 
- `:e <filename>` 打开名为 filename 的文件，若文件不存在则创建之 
- `:Ex` 在 Vim 中打开目录树，光标选中后回车打开对应文件（提示：`-` 进入上级目录> 
还有如果文章内有include之类的文件(或者有链接指向文件)，光标放到文件名的任意位置上，按下gf，就会直接打开文件 
### 文档内查找 
- `*` 向后查找光标当前所在单词 
- `#` 向前查找光标当前所在单词
- `/<search>` 向后查找指定字符串 
- `?<search>` 向前查找指定字符串 
- `n` 继续查找下一个 
- `N` 继续查找上一个 
### 行内查找 
- `f<X>` 当前行内向行尾方向查找并定位到字符 `X` 
- `t<X>` 当前行内向行尾方向查找并定位到字符 `X` 之前 
- `F<X>` 当前行内向行首方向查找并定位到字符 `X` 
- `T<X>` 当前行内向行首方向查找并定位到字符 `X` 之后 
- `;` 继续向当前方向查找下一个字符 
- `,` 向当前相反方向查找下一个字符 
> Vim 中可以使用 `%` 对 `(` 和 `)`，`[` 和 `]`，`{` 和 `}` 进行匹配查找，当光标位>于其中一个符号上时，按下 `%`，光标会跳到与之匹配的另外一个符号上。
 
buffer 就是当前 Vim session 的文件历史记录。
> 现在你的 buffer 中应该已经有两个文件了，你可以用 `:buffers` 或 `:ls` 命令查看>，看到 
> buffer 列表了吧，大概是这个样子的： 
``` 
:ls 

  1 #h   "file-one.md"                  line 47 

  2 %a   "file-two.md"                  line 1 

Press ENTER or type command to continue 
```
- `:bn` 打开缓存中下一个文件 
- `:bp` 打开缓存中上一个文件 
- `:b<N>` 打开缓存中第 N 个文件 
> 你也可以使用 `:bdelete<N>` 来删除所要关闭的缓冲区，缩写 `:bd<N>`。 
### 插入 
- `i` 当前字符前插入 
- `a` 当前字符后插入 
- `I` 行首插入 
- `A` 行尾插入 
- `o` 在下一行插入 
- `O` 在上一行插入 
### 删除（并保存到 Vim 剪贴板） 
- `s` 删除当前字符，并进入 `INSERT` 模式 
- `S` 删除当前行并保存到 Vim 剪贴板，同时进入 `INSERT` 模式（等同于 `cc`） 
- `x` 删除当前字符，相当于 insert 模式下的 `Delete` 
- `X` 删除前一个字符，相当于 insert 模式下的 `Backspace` 
- `dd` 删除当前行，并将删除的内容保存到 Vim 剪贴板 
- `d<X>` 删除指定内容并保存到 Vim 剪贴板 
- `cc` 删除当前行并保存到 Vim 剪贴板，同时进入 `INSERT` 模式 
- `c<X>` 删除指定内容并保存到 Vim 剪贴板，同时进入 `INSERT` 模式 
> 说明： `<X>` 部分是对操作内容的描述，如果要删除一个单词，就输入 `dw` 或者 `de`>，要复制当前位置到行尾的内容，就输入 `y$`，要删除后面 3 个字符并插入，就输入 `c3l` 诸如此类>。_ 
### 复制
- `yy` 复制当前行到 Vim 剪贴板 
- `y<X>` 复制指定内容到 Vim 剪贴板 
### 粘贴 
- `p` 在当前位置后粘贴 
- `P` 在当前位置前粘贴
### 合并 
- `J` 将当前行与下一行合并 
### 替换 
- `r<X>` 将当前字符替换为 X 
- `gu<X>` 将指定的文本转换为小写 
- `gU<X>` 将指定的文本转换为大写 
- `:%s/<search>/<replace>/` 查找 search 内容并替换为 replace 内容 
### 撤销、重做 
- `u` 撤销 
- `Ctrl-r` 重做 
### 保存文件 
- `:w` 保存当前文件 
- `:wa` 保存全部文件 
- `:wq` or `ZZ` 保存并退出 
- `:q!` or `ZQ` 强制退出，不保存 
- `:saveas <new filename>` 文件另存为 
- `:w <new filename>` 文件另存一份名为 `<new filename>` 的副本并继续编辑原文件 
### 重复上一次命令 
Vim 有一个特殊的命令 `.`，你可以用它重复执行上一个命令。 
## 文章排版
### 缩进 
- `>>` 向右缩进当前行 
- `<<` 向左缩进当前行 
> 在这一行上依次按 `3>>`，`<<` 和 `<G` 看看效果 
就是以下三行（包括这样），都缩进 

就是本行向左缩进 

`<G`是都向左缩进一下 
### 自动排版 
- `==` 自动排版当前行 
- `gg=G` 当前文档全文自动排版 
- `<N>==` 对从当前行开始的 N 行进行自动排版 
- `=<N>j` 对当前行以及向下 N 行进行自动排版 
- `=<N>k` 对当前行以及向上 N 行进行自动排版 
还有下面的一个用法  到第一个大括号处   =%,就会很快自动排版 
## 分屏
### 分屏方式 
- `:split` 缩写 `:sp` or `Ctrl-w s` 上下分屏 
- `:vsplit` 缩写 `:vs` or `Ctrl-w v` 左右分屏 
- `:diffsplit` 缩写 `:diffs` diff 模式打开一个分屏，后面可以加上 {filename} 
### 窗口跳转 
- `Ctrl-w w` 激活下一个窗口 
- `Ctrl-w j` 激活下方窗口 
- `Ctrl-w k` 激活上方窗口 
- `Ctrl-w h` 激活左侧窗口 
- `Ctrl-w l` 激活右侧窗口 
### 移动分屏 
- `Ctrl-w L` 移动到最右侧 
- `Ctrl-w H` 移动到最左侧 
- `Ctrl-w K` 移动到顶部 
- `Ctrl-w J` 移动到底部 
> _注意：区分大小写。另外，可以将底部的屏幕移动到右侧，实现上下分屏到左右分屏的转换。_ 
### 屏幕缩放 
- `Ctrl-w =` 平均窗口尺寸 
- `Ctrl-w +` 增加高度 
- `Ctrl-w -` 缩减高度 
- `Ctrl-w _` 最大高度 
- `Ctrl-w >` 增加宽度 
- `Ctrl-w <` 缩减宽度 
- `Ctrl-w |` 最大宽度
**buffer 和刚刚讲到的分屏操作都很适合在少量文件之间进行切换，** 
> 文件超过 3 个我觉得就不方便了，而标签页则更适合多文件之间的切换。
## 标签页 
### 创建标签页 
- `:tabnew` or `:tabedit` 缩写 `:tabe` 打开新标签页 
- `Ctrl-w gf` 在新标签页中打开当前光标所在位置的文件名 
> _注意：`:tabnew` 和 `:tabedit` 后面都可以跟一个 <空格><文件名> 用以在新标签页中 
****打开指定文件**，还可以在 `:` 后面加一个数字，指出新标签页在列表中的位置（从 0 开始）。_
### 切换标签页 
- `gt` or `:tabnext` 缩写 `:tabn` 下一个标签页（最后一个会循环到第一个） 
- `gT` or `:tabprevious` 缩写 `:tabp` 上一个标签页（第一个会循环到最后一个） 
- `:tabrewind` 缩写 `:tabr` or `:tabfirst` 缩写 `:tabfir` 到第一个 
- `:tablast` 缩写 `:tabl` 到最后一个标签页 
### 关闭标签页 
- `:tabclose` 缩写 `:tabc` 关闭 当前标签页 
- `:-tabc` 关闭上一个标签页 
- `:+tabc` 关闭下一个标签页 
- `:tabonly` 缩写 `:tabo` 关闭其他标签页 
## 块状操作 
比如在创建一个数组时，从别的地方复制了许多成员，假设一个成员一行，然后我们要在每一行开头加上 “ " ”，在每一行最后加上 “ " , ”，假设有一百个成员，很麻烦的。
- 我们可以这样操作 
1. 先到那行，比如 14G0，到了14行开头 
2. 然后，按下ctrl+v进入块操作 
3. 然后就是100j，跳转到以下100行的开头 
4. 然后按下大写字母I，写上“ " ”，按esc键，就会发现，100行成员之前都有了双引号， 
5. 然后按下 $,到首行末尾，然后还是ctrl+v、100j，选中全部一百行，然后按下大写字母A，加上“ " , ”，按下esc键，这样100行的末尾就会都出现引号和逗号
## 宏操作举例子
> 同样的效果，我们还可以提高效率，用宏来处理重复的工作 
1. 按 qa I<单引号><Esc>A<单引号><逗号><Esc>jq99@a 
2. 按顺序依次按下这些键 
3. 之前的工作就会在瞬间完成 
- 具体的解释
```sh
q时开始录制宏，a是给宏一个储存位置，0-9\a-z都可 
后面I<单引号><Esc>A<单引号><逗号><Esc>j是操作内容 
前面添加，后面添加，到下一行 
q是结束录制 
@a是唤醒宏 
99是执行99次 
@@是执行最后一次宏
``` 